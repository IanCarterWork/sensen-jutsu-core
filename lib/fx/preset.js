import { SensenFxEngine } from ".";
export class FxPresenter {
    async entry(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [0], to: [100],
                    duration: 360,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.opacity = `${interpolarity[0] / 100}`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async entryReverse(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [0], to: [100],
                    duration: 200,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.opacity = `${interpolarity[0] / 10}`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async exit(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [100], to: [0],
                    duration: 200,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.opacity = `${interpolarity[0] / 10}`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async exitReverse(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [100], to: [0],
                    duration: 200,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.opacity = `${interpolarity[0] / 10}`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
}
export class FxSlideHorizontal extends FxPresenter {
    async entry(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [110], to: [0],
                    duration: 256,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.transform = `translateX(${interpolarity[0]}%)`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async entryReverse(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [-110], to: [0],
                    duration: 256,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.transform = `translateX(${interpolarity[0]}%)`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async exit(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [0], to: [110],
                    duration: 400,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.transform = `translateX(${interpolarity[0]}%)`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
    async exitReverse(widget) {
        return new Promise((done, fail) => {
            try {
                const fx = new SensenFxEngine({
                    from: [0], to: [-110],
                    duration: 400,
                    hit: (interpolarity) => {
                        if (widget) {
                            widget.style.transform = `translateX(${interpolarity[0]}%)`;
                        }
                    },
                    done: () => done(widget)
                });
                fx.Start();
            }
            catch (e) {
                fail(e);
            }
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vY29yZS9meC9wcmVzZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFzQixjQUFjLEVBQUUsTUFBTSxHQUFHLENBQUM7QUFNdkQsTUFBTSxPQUFPLFdBQVc7SUFFcEIsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFvQjtRQUU1QixPQUFPLElBQUksT0FBTyxDQUEwQixDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtZQUV2RCxJQUFHO2dCQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksY0FBYyxDQUFDO29CQUUxQixJQUFJLEVBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUMsQ0FBQyxHQUFHLENBQUM7b0JBRWxCLFFBQVEsRUFBRSxHQUFHO29CQUViLEdBQUcsRUFBRSxDQUFDLGFBQXVCLEVBQUMsRUFBRTt3QkFFNUIsSUFBRyxNQUFNLEVBQUM7NEJBRU4sTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUE7eUJBRXREO29CQUdMLENBQUM7b0JBRUQsSUFBSSxFQUFFLEdBQUUsRUFBRSxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUM7aUJBRXpCLENBQUMsQ0FBQTtnQkFFRixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7YUFFZDtZQUVELE9BQU0sQ0FBQyxFQUFDO2dCQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUFFO1FBRXhCLENBQUMsQ0FBQyxDQUFBO0lBRU4sQ0FBQztJQUlELEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBb0I7UUFFbkMsT0FBTyxJQUFJLE9BQU8sQ0FBMEIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFFdkQsSUFBRztnQkFFQyxNQUFNLEVBQUUsR0FBRyxJQUFJLGNBQWMsQ0FBQztvQkFFMUIsSUFBSSxFQUFDLENBQUMsQ0FB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Q0FBQyxJQUFJLENBQUE7eUJBRS9EO29CQUdMLENBQUM7b0JBRUQsSUFBSSxFQUFFLEdBQUUsRUFBRSxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUM7aUJBRXpCLENBQUMsQ0FBQTtnQkFFRixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7YUFFZDtZQUVELE9BQU0sQ0FBQyxFQUFDO2dCQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUFFO1FBRXhCLENBQUMsQ0FBQyxDQUFBO0lBRU4sQ0FBQztDQUdKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2Vuc2VuRnhUcmFuc2l0aW9uLCBTZW5zZW5GeEVuZ2luZSB9IGZyb20gXCIuXCI7XG5cblxuXG5cblxuZXhwb3J0IGNsYXNzIEZ4UHJlc2VudGVyIGltcGxlbWVudHMgU2Vuc2VuRnhUcmFuc2l0aW9ue1xuXG4gICAgYXN5bmMgZW50cnkod2lkZ2V0PzogSFRNTEVsZW1lbnQpe1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MRWxlbWVudCB8IHVuZGVmaW5lZD4oKGRvbmUsIGZhaWwpID0+e1xuXG4gICAgICAgICAgICB0cnl7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmeCA9IG5ldyBTZW5zZW5GeEVuZ2luZSh7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9tOlswXSwgdG86WzEwMF0sXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzYwLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaGl0OiAoaW50ZXJwb2xhcml0eTogbnVtYmVyW10pPT57XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdpZGdldCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnN0eWxlLm9wYWNpdHkgPSBgJHsgaW50ZXJwb2xhcml0eVswXSAvIDEwMH1gXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogKCk9PmRvbmUod2lkZ2V0KVxuXG4gICAgICAgICAgICAgICAgfSlcbiAgICBcbiAgICAgICAgICAgICAgICBmeC5TdGFydCgpO1xuICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXRjaChlKXsgZmFpbChlKTsgfVxuXG4gICAgICAgIH0pXG5cbiAgICB9XG5cblxuXG4gICAgYXN5bmMgZW50cnlSZXZlcnNlKHdpZGdldD86IEhUTUxFbGVtZW50KXtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+KChkb25lLCBmYWlsKSA9PntcblxuICAgICAgICAgICAgdHJ5e1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZnggPSBuZXcgU2Vuc2VuRnhFbmdpbmUoe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbTpbMF0sIHRvOlsxMDBdLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGhpdDogKGludGVycG9sYXJpdHk6IG51bWJlcltdKT0+e1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih3aWRnZXQpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnN0eWxlLm9wYWNpdHkgPSBgJHsgaW50ZXJwb2xhcml0eVswXSAvIDEwfWBcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICgpPT5kb25lKHdpZGdldClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcblxuICAgIFxuXG4gICAgICAgICAgICAgICAgZnguU3RhcnQoKTtcbiAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2F0Y2goZSl7IGZhaWwoZSk7IH1cblxuICAgICAgICB9KVxuXG4gICAgfVxuXG5cblxuICAgIGFzeW5jIGV4aXQod2lkZ2V0PzogSFRNTEVsZW1lbnQpe1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MRWxlbWVudCB8IHVuZGVmaW5lZD4oKGRvbmUsIGZhaWwpID0+e1xuXG4gICAgICAgICAgICB0cnl7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmeCA9IG5ldyBTZW5zZW5GeEVuZ2luZSh7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9tOlsxMDBdLCB0bzpbMF0sXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaGl0OiAoaW50ZXJwb2xhcml0eTogbnVtYmVyW10pPT57XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdpZGdldCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXQuc3R5bGUub3BhY2l0eSA9IGAkeyBpbnRlcnBvbGFyaXR5WzBdIC8gMTB9YFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICgpPT5kb25lKHdpZGdldClcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgXG4gICAgICAgICAgICAgICAgZnguU3RhcnQoKTtcbiAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2F0Y2goZSl7IGZhaWwoZSk7IH1cblxuICAgICAgICB9KVxuXG4gICAgfVxuXG5cblxuICAgIGFzeW5jIGV4aXRSZXZlcnNlKHdpZGdldD86IEhUTUxFbGVtZW50KXtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+KChkb25lLCBmYWlsKSA9PntcblxuICAgICAgICAgICAgdHJ5e1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZnggPSBuZXcgU2Vuc2VuRnhFbmdpbmUoe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbTpbMTAwXSwgdG86WzBdLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGhpdDogKGludGVycG9sYXJpdHk6IG51bWJlcltdKT0+e1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih3aWRnZXQpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnN0eWxlLm9wYWNpdHkgPSBgJHsgaW50ZXJwb2xhcml0eVswXSAvIDEwfWBcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAoKT0+ZG9uZSh3aWRnZXQpXG5cbiAgICAgICAgICAgICAgICB9KVxuICAgIFxuICAgICAgICAgICAgICAgIGZ4LlN0YXJ0KCk7XG4gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhdGNoKGUpeyBmYWlsKGUpOyB9XG5cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIFxufVxuXG5cblxuXG5cblxuZXhwb3J0IGNsYXNzIEZ4U2xpZGVIb3Jpem9udGFsIGV4dGVuZHMgRnhQcmVzZW50ZXJ7XG5cbiAgICBhc3luYyBlbnRyeSh3aWRnZXQ/OiBIVE1MRWxlbWVudCl7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkPigoZG9uZSwgZmFpbCkgPT57XG5cbiAgICAgICAgICAgIHRyeXtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZ4ID0gbmV3IFNlbnNlbkZ4RW5naW5lKHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb206WzExMF0sIHRvOlswXSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTYsXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBoaXQ6IChpbnRlcnBvbGFyaXR5OiBudW1iZXJbXSk9PntcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih3aWRnZXQpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7IGludGVycG9sYXJpdHlbMF19JSlgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAoKT0+ZG9uZSh3aWRnZXQpXG5cbiAgICAgICAgICAgICAgICB9KVxuICAgIFxuICAgICAgICAgICAgICAgIGZ4LlN0YXJ0KCk7XG4gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhdGNoKGUpeyBmYWlsKGUpOyB9XG5cbiAgICAgICAgfSlcblxuICAgIH1cblxuXG5cbiAgICBhc3luYyBlbnRyeVJldmVyc2Uod2lkZ2V0PzogSFRNTEVsZW1lbnQpe1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MRWxlbWVudCB8IHVuZGVmaW5lZD4oKGRvbmUsIGZhaWwpID0+e1xuXG4gICAgICAgICAgICB0cnl7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmeCA9IG5ldyBTZW5zZW5GeEVuZ2luZSh7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9tOlstMTEwXSwgdG86WzBdLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1NixcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGhpdDogKGludGVycG9sYXJpdHk6IG51bWJlcltdKT0+e1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih3aWRnZXQpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7IGludGVycG9sYXJpdHlbMF19JSlgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBkb25lOiAoKT0+ZG9uZSh3aWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICBcblxuICAgICAgICAgICAgICAgIGZ4LlN0YXJ0KCk7XG4gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhdGNoKGUpeyBmYWlsKGUpOyB9XG5cbiAgICAgICAgfSlcblxuICAgIH1cblxuXG4gICAgYXN5bmMgZXhpdCh3aWRnZXQ/OiBIVE1MRWxlbWVudCl7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkPigoZG9uZSwgZmFpbCkgPT57XG5cbiAgICAgICAgICAgIHRyeXtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZ4ID0gbmV3IFNlbnNlbkZ4RW5naW5lKHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb206WzBdLCB0bzpbMTEwXSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBoaXQ6IChpbnRlcnBvbGFyaXR5OiBudW1iZXJbXSk9PntcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYod2lkZ2V0KXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkeyBpbnRlcnBvbGFyaXR5WzBdfSUpYFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICgpPT5kb25lKHdpZGdldClcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgXG4gICAgICAgICAgICAgICAgZnguU3RhcnQoKTtcbiAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2F0Y2goZSl7IGZhaWwoZSk7IH1cblxuICAgICAgICB9KVxuXG4gICAgfVxuXG5cbiAgICBhc3luYyBleGl0UmV2ZXJzZSh3aWRnZXQ/OiBIVE1MRWxlbWVudCk6IFByb21pc2U8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+IHtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+KChkb25lLCBmYWlsKSA9PntcblxuICAgICAgICAgICAgdHJ5e1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZnggPSBuZXcgU2Vuc2VuRnhFbmdpbmUoe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbTpbMF0sIHRvOlstMTEwXSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBoaXQ6IChpbnRlcnBvbGFyaXR5OiBudW1iZXJbXSk9PntcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYod2lkZ2V0KXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkeyBpbnRlcnBvbGFyaXR5WzBdfSUpYFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICgpPT5kb25lKHdpZGdldClcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgXG4gICAgICAgICAgICAgICAgZnguU3RhcnQoKTtcbiAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2F0Y2goZSl7IGZhaWwoZSk7IH1cblxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgXG59XG5cbiJdfQ==