import { ProtorianPaletteColor } from "./PaletteColor";
import { ProtorianToneColor } from "./ToneColor";
export class ThemeColor {
    /**
     * ThemeColor Variable Name
     */
    static $(varname) {
        return (`var(--color-${(varname).replace(new RegExp("([A-Z])", "g"), '-$&').toLowerCase()})`);
    }
}
export default class ProtorianThemeColor {
    constructor() {
        this.input = [];
        this.palette = {};
        this.tone = {};
        this.DOM = null;
        this.injectionRefs = [];
        this.init();
    }
    add(input) {
        this.input[this.input.length] = input;
        return this;
    }
    render() {
        this.input.forEach(input => {
            if (input instanceof ProtorianPaletteColor ||
                input instanceof ProtorianToneColor) {
                this.build(input.Mixture());
            }
            else {
                throw (`This ThemeColor is not supported < ${input.name || 'undefined'} >`);
            }
        });
        return this;
    }
    /* Web Abilities - Begin */
    init() {
        this.DOM = document.querySelector('style[theme\\:color\\:ref]');
        if (!this.DOM) {
            this.DOM = document.createElement('style');
            this.DOM.setAttribute('type', 'text/css');
            this.DOM.setAttribute('theme\:color\:ref', '@transaction');
            document.head.appendChild(this.DOM);
        }
        return this;
    }
    build(input) {
        if ('mixed' in input) {
            const lines = [];
            const majRex = new RegExp("([A-Z])", "g");
            Object.keys(input.mixed).forEach(color => {
                const clone = input.mixed[color];
                Object.keys(input.mixed[color]).forEach(variante => {
                    lines[lines.length] = `${(`--color-${color}${variante == 'color' ? '' : `-${variante}`}`).replace(majRex, '-$&').toLowerCase()} : ${clone[variante]}`;
                });
            });
            this.webInject(input.nature, input.name, lines);
        }
        return this;
    }
    webInject(nature, name, code) {
        let embed;
        if (Array.isArray(code)) {
            code = code.join(';');
        }
        switch (nature) {
            case '@palette':
                embed = `\n:root[theme-color-palette="${name}"]{ ${code} }`;
                break;
            case '@tone':
                embed = `\n:root[theme-color-tone="${name}"]{ ${code} }`;
                break;
        }
        const ref = document.createTextNode(embed);
        this.DOM?.appendChild(ref);
        return this;
    }
    usePalette(name) {
        const doc = document.documentElement;
        doc.setAttribute('theme-color-palette', name);
        return this;
    }
    useTone(name) {
        /**
         * Update Current Object
         */
        this.input.forEach(input => {
            if (input instanceof ProtorianToneColor) {
                if (input.name == name) {
                    this.tone = input;
                }
            }
        });
        const doc = document.documentElement;
        doc.setAttribute('theme-color-tone', name);
        return this;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGhlbWVDb2xvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2NvcmUvdGhlbWUtY29sb3IvVGhlbWVDb2xvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUV2RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFNakQsTUFBTSxPQUFPLFVBQVU7SUFHbkI7O09BRUc7SUFDSCxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQXdCO1FBRTdCLE9BQU8sQ0FBQyxlQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFHLEdBQUcsQ0FBQyxDQUFDO0lBR3BHLENBQUM7Q0FFSjtBQU9ELE1BQU0sQ0FBQyxPQUFPLE9BQU8sbUJBQW1CO0lBZXBDO1FBWkEsVUFBSyxHQUFxQixFQUFFLENBQUM7UUFFN0IsWUFBTyxHQUEwQixFQUEyQixDQUFDO1FBRTdELFNBQUksR0FBdUIsRUFBd0IsQ0FBQztRQUVwRCxRQUFHLEdBQTRCLElBQUksQ0FBQztRQUVwQyxrQkFBYSxHQUFhLEVBQUUsQ0FBQztRQU16QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFaEIsQ0FBQztJQUlELEdBQUcsQ0FBQyxLQUFxQjtRQUVyQixJQUFJLENBQUMsS0FBSyxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFFLEdBQUcsS0FBSyxDQUFDO1FBRXhDLE9BQU8sSUFBSSxDQUFDO0lBRWhCLENBQUM7SUFRRCxNQUFNO1FBRUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBLEVBQUU7WUFFdEIsSUFFSSxLQUFLLFlBQVkscUJBQXFCO2dCQUV0QyxLQUFLLFlBQVksa0JBQWtCLEVBRXRDO2dCQUVHLElBQUksQ0FBQyxL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SUFFaEIsQ0FBQztJQUlELFVBQVUsQ0FBQyxJQUFZO1FBRW5CLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFFckMsR0FBRyxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUU5QyxPQUFPLElBQUksQ0FBQztJQUVoQixDQUFDO0lBSUQsT0FBTyxDQUFDLElBQVk7UUFFaEI7O1dBRUc7UUFDRixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUEsRUFBRTtZQUV2QixJQUFHLEtBQUssWUFBWSxrQkFBa0IsRUFBQztnQkFFbkMsSUFBRyxLQUFLLENBQUMsSUFBSSxJQUFJLElBQUksRUFBQztvQkFFbEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7aUJBRXJCO2FBRUo7UUFFTCxDQUFDLENBQUMsQ0FBQTtRQUVGLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFFckMsR0FBRyxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUUzQyxPQUFPLElBQUksQ0FBQztJQUVoQixDQUFDO0NBT0oiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBQcm90b3JpYW5Db2xvciBmcm9tIFwiLi9Db2xvclwiO1xuaW1wb3J0IHsgUHJvdG9yaWFuQ29sb3JOYXR1cmUgfSBmcm9tIFwiLi9Db2xvci50eXBlXCI7XG5pbXBvcnQgeyBQcm90b3JpYW5QYWxldHRlQ29sb3IgfSBmcm9tIFwiLi9QYWxldHRlQ29sb3JcIjtcbmltcG9ydCB7IFRoZW1lQ29sb3JQcm9wcywgVGhlbWVDb2xvclNjaGVtZSB9IGZyb20gXCIuL1RoZW1lQ29sb3IudHlwZVwiO1xuaW1wb3J0IHsgUHJvdG9yaWFuVG9uZUNvbG9yIH0gZnJvbSBcIi4vVG9uZUNvbG9yXCI7XG5cblxuXG5cblxuZXhwb3J0IGNsYXNzIFRoZW1lQ29sb3J7XG5cblxuICAgIC8qKlxuICAgICAqIFRoZW1lQ29sb3IgVmFyaWFibGUgTmFtZVxuICAgICAqL1xuICAgIHN0YXRpYyAkKHZhcm5hbWU6IFRoZW1lQ29sb3JQcm9wcykgOiBzdHJpbmd7XG5cbiAgICAgICAgcmV0dXJuIChgdmFyKC0tY29sb3ItJHsgKHZhcm5hbWUpLnJlcGxhY2UobmV3IFJlZ0V4cChcIihbQS1aXSlcIiwgXCJnXCIpLCAnLSQmJykudG9Mb3dlckNhc2UoKSB9KWApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cblxuXG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm90b3JpYW5UaGVtZUNvbG9ye1xuXG5cbiAgICBpbnB1dDogUHJvdG9yaWFuQ29sb3JbXSA9IFtdO1xuXG4gICAgcGFsZXR0ZTogUHJvdG9yaWFuUGFsZXR0ZUNvbG9yID0ge30gYXMgUHJvdG9yaWFuUGFsZXR0ZUNvbG9yO1xuXG4gICAgdG9uZTogUHJvdG9yaWFuVG9uZUNvbG9yID0ge30gYXMgUHJvdG9yaWFuVG9uZUNvbG9yO1xuXG4gICAgRE9NOiBIVE1MU3R5bGVFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBpbmplY3Rpb25SZWZzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuXG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICBcbiAgICB9XG5cblxuXG4gICAgYWRkKGlucHV0OiBQcm90b3JpYW5Db2xvcil7XG5cbiAgICAgICAgdGhpcy5pbnB1dFsgdGhpcy5pbnB1dC5sZW5ndGggXSA9IGlucHV0O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBcbiAgICBcbiAgICBcbiAgICBcblxuXG4gICAgcmVuZGVyKCl7XG5cbiAgICAgICAgdGhpcy5pbnB1dC5mb3JFYWNoKGlucHV0PT57XG5cbiAgICAgICAgICAgIGlmKFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlucHV0IGluc3RhbmNlb2YgUHJvdG9yaWFuUGFsZXR0ZUNvbG9yIHx8XG5cbiAgICAgICAgICAgICAgICBpbnB1dCBpbnN0YW5jZW9mIFByb3RvcmlhblRvbmVDb2xvclxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgKXtcblxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGQoaW5wdXQuTWl4dHVyZSgpKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgdGhyb3cgKGBUaGlzIFRoZW1lQ29sb3IgaXMgbm90IHN1cHBvcnRlZCA8ICR7IGlucHV0Lm5hbWUgfHwgJ3VuZGVmaW5lZCcgfSA+YClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuXG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIFxuICAgIH1cblxuXG5cblxuXG5cbiAgICBcblxuICAgIFxuXG4gICAgLyogV2ViIEFiaWxpdGllcyAtIEJlZ2luICovXG5cbiAgICBpbml0KCl7XG5cbiAgICAgICAgdGhpcy5ET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdHlsZVt0aGVtZVxcXFw6Y29sb3JcXFxcOnJlZl0nKTtcblxuICAgICAgICBpZighdGhpcy5ET00pe1xuXG4gICAgICAgICAgICB0aGlzLkRPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgICAgIHRoaXMuRE9NLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpXG5cbiAgICAgICAgICAgIHRoaXMuRE9NLnNldEF0dHJpYnV0ZSgndGhlbWVcXDpjb2xvclxcOnJlZicsICdAdHJhbnNhY3Rpb24nKVxuXG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCB0aGlzLkRPTSApO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICB9XG5cblxuICAgIGJ1aWxkKGlucHV0OiBQcm90b3JpYW5Db2xvcil7XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgaWYoJ21peGVkJyBpbiBpbnB1dCl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbIF07IFxuXG4gICAgICAgICAgICBjb25zdCBtYWpSZXggPSBuZXcgUmVnRXhwKFwiKFtBLVpdKVwiLCBcImdcIik7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgT2JqZWN0LmtleXMoaW5wdXQubWl4ZWQpLmZvckVhY2goY29sb3I9PntcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lID0gaW5wdXQubWl4ZWRbY29sb3JdIGFzIHtbSzogc3RyaW5nXTphbnl9XG5cbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhpbnB1dC5taXhlZFtjb2xvcl0pLmZvckVhY2godmFyaWFudGU9PntcblxuICAgICAgICAgICAgICAgICAgICBsaW5lc1sgbGluZXMubGVuZ3RoIF0gPSBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKGAtLWNvbG9yLSR7IFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSR7IFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudGUgPT0gJ2NvbG9yJyA/ICcnIDogYC0ke3ZhcmlhbnRlfWAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gKS5yZXBsYWNlKG1halJleCwgJy0kJicpLnRvTG93ZXJDYXNlKClcblxuICAgICAgICAgICAgICAgICAgICB9IDogJHsgY2xvbmVbdmFyaWFudGVdIH1gO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLndlYkluamVjdChpbnB1dC5uYXR1cmUsIGlucHV0Lm5hbWUsIGxpbmVzKVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgXG4gICAgfVxuXG5cbiAgICB3ZWJJbmplY3QobmF0dXJlOiBQcm90b3JpYW5Db2xvck5hdHVyZSwgbmFtZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcgfCBzdHJpbmdbXSl7XG5cbiAgICAgICAgbGV0IGVtYmVkOiBzdHJpbmc7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShjb2RlKSl7IGNvZGUgPSBjb2RlLmpvaW4oJzsnKTsgfVxuXG4gICAgICAgIHN3aXRjaChuYXR1cmUpe1xuXG5cbiAgICAgICAgICAgIGNhc2UgJ0BwYWxldHRlJzpcblxuICAgICAgICAgICAgICAgIGVtYmVkID0gYFxcbjpyb290W3RoZW1lLWNvbG9yLXBhbGV0dGU9XCIkeyBuYW1lIH1cIl17ICR7IGNvZGUgfSB9YDtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgY2FzZSAnQHRvbmUnOlxuXG4gICAgICAgICAgICAgICAgZW1iZWQgPSBgXFxuOnJvb3RbdGhlbWUtY29sb3ItdG9uZT1cIiR7IG5hbWUgfVwiXXsgJHsgY29kZSB9IH1gO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cblxuXG4gICAgICAgIGNvbnN0IHJlZiA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVtYmVkKTtcblxuICAgICAgICB0aGlzLkRPTT8uYXBwZW5kQ2hpbGQocmVmKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgIH1cblxuXG5cbiAgICB1c2VQYWxldHRlKG5hbWU6IHN0cmluZyl7XG5cbiAgICAgICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgIGRvYy5zZXRBdHRyaWJ1dGUoJ3RoZW1lLWNvbG9yLXBhbGV0dGUnLCBuYW1lKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBcbiAgICB9XG5cblxuXG4gICAgdXNlVG9uZShuYW1lOiBzdHJpbmcpe1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgQ3VycmVudCBPYmplY3RcbiAgICAgICAgICovXG4gICAgICAgICB0aGlzLmlucHV0LmZvckVhY2goaW5wdXQ9PntcblxuICAgICAgICAgICAgaWYoaW5wdXQgaW5zdGFuY2VvZiBQcm90b3JpYW5Ub25lQ29sb3Ipe1xuICAgIFxuICAgICAgICAgICAgICAgIGlmKGlucHV0Lm5hbWUgPT0gbmFtZSl7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9uZSA9IGlucHV0O1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBkb2Muc2V0QXR0cmlidXRlKCd0aGVtZS1jb2xvci10b25lJywgbmFtZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgXG4gICAgfVxuXG5cbiAgICAvKiBXZWIgQWJpbGl0aWVzIC0gRmluICovXG5cblxuICAgIFxufSJdfQ==