import { SensenPaletteColor } from "./palette-color";
import { SensenToneColor } from "./tone-color";
export class ThemeColor {
    /**
     * ThemeColor Variable Name
     */
    static $(varname) {
        return (`var(--color-${(varname).replace(new RegExp("([A-Z])", "g"), '-$&').toLowerCase()})`);
    }
}
export default class SensenThemeColor {
    constructor() {
        this.input = [];
        this.palette = {};
        this.tone = {};
        this.DOM = null;
        this.injectionRefs = [];
        this.init();
    }
    add(input) {
        this.input[this.input.length] = input;
        return this;
    }
    render() {
        this.input.forEach(input => {
            if (input instanceof SensenPaletteColor ||
                input instanceof SensenToneColor) {
                this.build(input.Mixture());
            }
            else {
                throw (`This ThemeColor is not supported < ${input.name || 'undefined'} >`);
            }
        });
        return this;
    }
    /* Web Abilities - Begin */
    init() {
        this.DOM = document.querySelector('style[theme\\:color\\:ref]');
        if (!this.DOM) {
            this.DOM = document.createElement('style');
            this.DOM.setAttribute('type', 'text/css');
            this.DOM.setAttribute('theme\:color\:ref', '@transaction');
            document.head.appendChild(this.DOM);
        }
        return this;
    }
    build(input) {
        if ('mixed' in input) {
            const lines = [];
            const majRex = new RegExp("([A-Z])", "g");
            Object.keys(input.mixed).forEach(color => {
                const clone = input.mixed[color];
                Object.keys(input.mixed[color]).forEach(variante => {
                    lines[lines.length] = `${(`--color-${color}${variante == 'color' ? '' : `-${variante}`}`).replace(majRex, '-$&').toLowerCase()} : ${clone[variante]}`;
                });
            });
            this.webInject(input.nature, input.name, lines);
        }
        return this;
    }
    webInject(nature, name, code) {
        let embed;
        if (Array.isArray(code)) {
            code = code.join(';');
        }
        switch (nature) {
            case '@palette':
                embed = `\n:root[theme-color-palette="${name}"]{ ${code} }`;
                break;
            case '@tone':
                embed = `\n:root[theme-color-tone="${name}"]{ ${code} }`;
                break;
        }
        const ref = document.createTextNode(embed);
        this.DOM?.appendChild(ref);
        return this;
    }
    usePalette(name) {
        const doc = document.documentElement;
        doc.setAttribute('theme-color-palette', name);
        return this;
    }
    useTone(name) {
        /**
         * Update Current Object
         */
        this.input.forEach(input => {
            if (input instanceof SensenToneColor) {
                if (input.name == name) {
                    this.tone = input;
                }
            }
        });
        const doc = document.documentElement;
        doc.setAttribute('theme-color-tone', name);
        return this;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtY29sb3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9jb3JlL3RoZW1lLWNvbG9yL3RoZW1lLWNvbG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRXJELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFNL0MsTUFBTSxPQUFPLFVBQVU7SUFHbkI7O09BRUc7SUFDSCxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQXdCO1FBRTdCLE9BQU8sQ0FBQyxlQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFHLEdBQUcsQ0FBQyxDQUFDO0lBR3BHLENBQUM7Q0FFSjtBQU9ELE1BQU0sQ0FBQyxPQUFPLE9BQU8sZ0JBQWdCO0lBZWpDO1FBWkEsVUFBSyxHQUFrQixFQUFFLENBQUM7UUFFMUIsWUFBTyxHQUF1QixFQUF3QixDQUFDO1FBRXZELFNBQUksR0FBb0IsRUFBcUIsQ0FBQztRQUU5QyxRQUFHLEdBQTRCLElBQUksQ0FBQztRQUVwQyxrQkFBYSxHQUFhLEVBQUUsQ0FBQztRQU16QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFaEIsQ0FBQztJQUlELEdBQUcsQ0FBQyxLQUFrQjtRQUVsQixJQUFJLENBQUMsS0FBSyxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFFLEdBQUcsS0FBSyxDQUFDO1FBRXhDLE9BQU8sSUFBSSxDQUFDO0lBRWhCLENBQUM7SUFRRCxNQUFNO1FBRUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBLEVBQUU7WUFFdEIsSUFFSSxLQUFLLFlBQVksa0JBQWtCO2dCQUVuQyxLQUFLLFlBQVksZUFBZSxFQUVuQztnQkFFRyxJQUFJLENBQUMsS0FB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RWhCLENBQUM7SUFJRCxVQUFVLENBQUMsSUFBWTtRQUVuQixNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDO1FBRXJDLEdBQUcsQ0FBQyxZQUFZLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFOUMsT0FBTyxJQUFJLENBQUM7SUFFaEIsQ0FBQztJQUlELE9BQU8sQ0FBQyxJQUFZO1FBRWhCOztXQUVHO1FBQ0YsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBLEVBQUU7WUFFdkIsSUFBRyxLQUFLLFlBQVksZUFBZSxFQUFDO2dCQUVoQyxJQUFHLEtBQUssQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFDO29CQUVsQixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztpQkFFckI7YUFFSjtRQUVMLENBQUMsQ0FBQyxDQUFBO1FBRUYsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQztRQUVyQyxHQUFHLENBQUMsWUFBWSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxDQUFDO1FBRTNDLE9BQU8sSUFBSSxDQUFDO0lBRWhCLENBQUM7Q0FPSiIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IFNlbnNlbkNvbG9yIGZyb20gXCIuL2NvbG9yXCI7XG5pbXBvcnQgeyBTZW5zZW5Db2xvck5hdHVyZSB9IGZyb20gXCIuL2NvbG9yLnRcIjtcbmltcG9ydCB7IFNlbnNlblBhbGV0dGVDb2xvciB9IGZyb20gXCIuL3BhbGV0dGUtY29sb3JcIjtcbmltcG9ydCB7IFRoZW1lQ29sb3JQcm9wcyB9IGZyb20gXCIuL3RoZW1lLWNvbG9yLnRcIjtcbmltcG9ydCB7IFNlbnNlblRvbmVDb2xvciB9IGZyb20gXCIuL3RvbmUtY29sb3JcIjtcblxuXG5cblxuXG5leHBvcnQgY2xhc3MgVGhlbWVDb2xvcntcblxuXG4gICAgLyoqXG4gICAgICogVGhlbWVDb2xvciBWYXJpYWJsZSBOYW1lXG4gICAgICovXG4gICAgc3RhdGljICQodmFybmFtZTogVGhlbWVDb2xvclByb3BzKSA6IHN0cmluZ3tcblxuICAgICAgICByZXR1cm4gKGB2YXIoLS1jb2xvci0keyAodmFybmFtZSkucmVwbGFjZShuZXcgUmVnRXhwKFwiKFtBLVpdKVwiLCBcImdcIiksICctJCYnKS50b0xvd2VyQ2FzZSgpIH0pYCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbnNlblRoZW1lQ29sb3J7XG5cblxuICAgIGlucHV0OiBTZW5zZW5Db2xvcltdID0gW107XG5cbiAgICBwYWxldHRlOiBTZW5zZW5QYWxldHRlQ29sb3IgPSB7fSBhcyBTZW5zZW5QYWxldHRlQ29sb3I7XG5cbiAgICB0b25lOiBTZW5zZW5Ub25lQ29sb3IgPSB7fSBhcyBTZW5zZW5Ub25lQ29sb3I7XG5cbiAgICBET006IEhUTUxTdHlsZUVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIGluamVjdGlvblJlZnM6IHN0cmluZ1tdID0gW107XG4gICAgXG5cblxuICAgIGNvbnN0cnVjdG9yKCl7XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIFxuICAgIH1cblxuXG5cbiAgICBhZGQoaW5wdXQ6IFNlbnNlbkNvbG9yKXtcblxuICAgICAgICB0aGlzLmlucHV0WyB0aGlzLmlucHV0Lmxlbmd0aCBdID0gaW5wdXQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIFxuICAgIH1cblxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuXG5cbiAgICByZW5kZXIoKXtcblxuICAgICAgICB0aGlzLmlucHV0LmZvckVhY2goaW5wdXQ9PntcblxuICAgICAgICAgICAgaWYoXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW5wdXQgaW5zdGFuY2VvZiBTZW5zZW5QYWxldHRlQ29sb3IgfHxcblxuICAgICAgICAgICAgICAgIGlucHV0IGluc3RhbmNlb2YgU2Vuc2VuVG9uZUNvbG9yXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICApe1xuXG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZChpbnB1dC5NaXh0dXJlKCkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICB0aHJvdyAoYFRoaXMgVGhlbWVDb2xvciBpcyBub3Qgc3VwcG9ydGVkIDwgJHsgaW5wdXQubmFtZSB8fCAndW5kZWZpbmVkJyB9ID5gKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG5cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgXG4gICAgfVxuXG5cblxuXG5cblxuICAgIFxuXG4gICAgXG5cbiAgICAvKiBXZWIgQWJpbGl0aWVzIC0gQmVnaW4gKi9cblxuICAgIGluaXQoKXtcblxuICAgICAgICB0aGlzLkRPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlW3RoZW1lXFxcXDpjb2xvclxcXFw6cmVmXScpO1xuXG4gICAgICAgIGlmKCF0aGlzLkRPTSl7XG5cbiAgICAgICAgICAgIHRoaXMuRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICAgICAgdGhpcy5ET00uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJylcblxuICAgICAgICAgICAgdGhpcy5ET00uc2V0QXR0cmlidXRlKCd0aGVtZVxcOmNvbG9yXFw6cmVmJywgJ0B0cmFuc2FjdGlvbicpXG5cbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHRoaXMuRE9NICk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgIH1cblxuXG4gICAgYnVpbGQoaW5wdXQ6IFNlbnNlbkNvbG9yKXtcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICBpZignbWl4ZWQnIGluIGlucHV0KXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFsgXTsgXG5cbiAgICAgICAgICAgIGNvbnN0IG1halJleCA9IG5ldyBSZWdFeHAoXCIoW0EtWl0pXCIsIFwiZ1wiKTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhpbnB1dC5taXhlZCkuZm9yRWFjaChjb2xvcj0+e1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmUgPSBpbnB1dC5taXhlZFtjb2xvcl0gYXMge1tLOiBzdHJpbmddOmFueX1cblxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGlucHV0Lm1peGVkW2NvbG9yXSkuZm9yRWFjaCh2YXJpYW50ZT0+e1xuXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzWyBsaW5lcy5sZW5ndGggXSA9IGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAoYC0tY29sb3ItJHsgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9JHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50ZSA9PSAnY29sb3InID8gJycgOiBgLSR7dmFyaWFudGV9YCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfWApLnJlcGxhY2UobWFqUmV4LCAnLSQmJykudG9Mb3dlckNhc2UoKVxuXG4gICAgICAgICAgICAgICAgICAgIH0gOiAkeyBjbG9uZVt2YXJpYW50ZV0gfWA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMud2ViSW5qZWN0KGlucHV0Lm5hdHVyZSwgaW5wdXQubmFtZSwgbGluZXMpXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBcbiAgICB9XG5cblxuICAgIHdlYkluamVjdChuYXR1cmU6IFNlbnNlbkNvbG9yTmF0dXJlLCBuYW1lOiBzdHJpbmcsIGNvZGU6IHN0cmluZyB8IHN0cmluZ1tdKXtcblxuICAgICAgICBsZXQgZW1iZWQ6IHN0cmluZztcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGNvZGUpKXsgY29kZSA9IGNvZGUuam9pbignOycpOyB9XG5cbiAgICAgICAgc3dpdGNoKG5hdHVyZSl7XG5cblxuICAgICAgICAgICAgY2FzZSAnQHBhbGV0dGUnOlxuXG4gICAgICAgICAgICAgICAgZW1iZWQgPSBgXFxuOnJvb3RbdGhlbWUtY29sb3ItcGFsZXR0ZT1cIiR7IG5hbWUgfVwiXXsgJHsgY29kZSB9IH1gO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBjYXNlICdAdG9uZSc6XG5cbiAgICAgICAgICAgICAgICBlbWJlZCA9IGBcXG46cm9vdFt0aGVtZS1jb2xvci10b25lPVwiJHsgbmFtZSB9XCJdeyAkeyBjb2RlIH0gfWA7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZW1iZWQpO1xuXG4gICAgICAgIHRoaXMuRE9NPy5hcHBlbmRDaGlsZChyZWYpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgfVxuXG5cblxuICAgIHVzZVBhbGV0dGUobmFtZTogc3RyaW5nKXtcblxuICAgICAgICBjb25zdCBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgZG9jLnNldEF0dHJpYnV0ZSgndGhlbWUtY29sb3ItcGFsZXR0ZScsIG5hbWUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIFxuICAgIH1cblxuXG5cbiAgICB1c2VUb25lKG5hbWU6IHN0cmluZyl7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBDdXJyZW50IE9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgIHRoaXMuaW5wdXQuZm9yRWFjaChpbnB1dD0+e1xuXG4gICAgICAgICAgICBpZihpbnB1dCBpbnN0YW5jZW9mIFNlbnNlblRvbmVDb2xvcil7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYoaW5wdXQubmFtZSA9PSBuYW1lKXtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b25lID0gaW5wdXQ7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgIGRvYy5zZXRBdHRyaWJ1dGUoJ3RoZW1lLWNvbG9yLXRvbmUnLCBuYW1lKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBcbiAgICB9XG5cblxuICAgIC8qIFdlYiBBYmlsaXRpZXMgLSBGaW4gKi9cblxuXG4gICAgXG59Il19